(function(){function f(){c=""}function g(a){c+=a}function h(b){return function(c){a+=b}}function i(){var b=parseInt(a);return a="",b||1}function j(a){return typeof a=="string"&&(a=CodeMirror.commands[a]),function(b){for(var c=0,d=i();c<d;++c)a(b)}}function k(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function n(a,b,c,d){var e=0,f=-1;c>0&&(e=a.length,f=0);var g=e,h=e;a:for(;b!=e;b+=c)for(var i=0;i<d.length;++i)if(d[i].test(a.charAt(b+f))){g=b;for(;b!=e;b+=c)if(!d[i].test(a.charAt(b+f)))break;h=b;break a}return{from:Math.min(g,h),to:Math.max(g,h)}}function o(a,b,c,d){var e=a.getCursor(),f=e.ch,g=a.getLine(e.line),h;for(;;){h=n(g,f,c,b),f=h[d=="end"?"to":"from"];if(f!=e.ch||h.from==h.to)break;f=h[c<0?"from":"to"]}a.setCursor(e.line,h[d=="end"?"to":"from"],!0)}function p(a){var b=a.getCursor(),c=b.ch,d=a.getLine(b.line);CodeMirror.commands.goLineEnd(a),b.line!=a.lineCount()&&(CodeMirror.commands.goLineEnd(a),a.replaceSelection(" ","end"),CodeMirror.commands.delCharRight(a))}function q(a){a!="vim-insert"&&a!="vim"}function r(a,b){var c=e[b],d=a.getCursor().line,f=c>d?d:c,h=c>d?c:d;a.setCursor(f);for(var i=f;i<=h;i++)g("\n"+a.getLine(f)),a.removeLine(f)}function s(a,b){var c=e[b],d=a.getCursor().line,f=c>d?d:c,h=c>d?c:d;for(var i=f;i<=h;i++)g("\n"+a.getLine(i));a.setCursor(f)}var a="",b="f",c="",d=0,e=[],l=[/\w/,/[^\w\s]/],m=[/\S/],t=CodeMirror.keyMap.vim={0:function(b){a.length>0?h("0")(b):CodeMirror.commands.goLineStart(b)},A:function(a){i(),a.setCursor(a.getCursor().line,a.getCursor().ch+1,!0),a.setOption("keyMap","vim-insert"),q("vim-insert")},"Shift-A":function(a){i(),CodeMirror.commands.goLineEnd(a),a.setOption("keyMap","vim-insert"),q("vim-insert")},I:function(a){i(),a.setOption("keyMap","vim-insert"),q("vim-insert")},"Shift-I":function(a){i(),CodeMirror.commands.goLineStartSmart(a),a.setOption("keyMap","vim-insert"),q("vim-insert")},O:function(a){i(),CodeMirror.commands.goLineEnd(a),a.replaceSelection("\n","end"),a.setOption("keyMap","vim-insert"),q("vim-insert")},"Shift-O":function(a){i(),CodeMirror.commands.goLineStart(a),a.replaceSelection("\n","start"),a.setOption("keyMap","vim-insert"),q("vim-insert")},G:function(a){a.setOption("keyMap","vim-prefix-g")},D:function(a){a.setOption("keyMap","vim-prefix-d"),f()},M:function(a){a.setOption("keyMap","vim-prefix-m"),e=[]},Y:function(a){a.setOption("keyMap","vim-prefix-y"),f(),d=0},"/":function(a){var c=CodeMirror.commands.find;c&&c(a),b="f"},"Shift-/":function(a){var c=CodeMirror.commands.find;c&&(c(a),CodeMirror.commands.findPrev(a),b="r")},N:function(a){var c=CodeMirror.commands.findNext;c&&(b!="r"?c(a):CodeMirror.commands.findPrev(a))},"Shift-N":function(a){var c=CodeMirror.commands.findNext;c&&(b!="r"?CodeMirror.commands.findPrev(a):c.findNext(a))},"Shift-G":function(b){a==""?b.setCursor(b.lineCount()):b.setCursor(parseInt(a)-1),i(),CodeMirror.commands.goLineStart(b)},catchall:function(a){}};for(var u=1;u<10;++u)t[u]=h(u);k({H:"goColumnLeft",L:"goColumnRight",J:"goLineDown",K:"goLineUp",Left:"goColumnLeft",Right:"goColumnRight",Down:"goLineDown",Up:"goLineUp",Backspace:"goCharLeft",Space:"goCharRight",B:function(a){o(a,l,-1,"end")},E:function(a){o(a,l,1,"end")},W:function(a){o(a,l,1,"start")},"Shift-B":function(a){o(a,m,-1,"end")},"Shift-E":function(a){o(a,m,1,"end")},"Shift-W":function(a){o(a,m,1,"start")},X:function(a){CodeMirror.commands.delCharRight(a)},P:function(a){var b=a.getCursor().line;c!=""&&(CodeMirror.commands.goLineEnd(a),a.replaceSelection(c,"end")),a.setCursor(b+1)},"Shift-X":function(a){CodeMirror.commands.delCharLeft(a)},"Shift-J":function(a){p(a)},"Shift-`":function(a){var b=a.getCursor(),c=a.getRange({line:b.line,ch:b.ch},{line:b.line,ch:b.ch+1});c=c!=c.toLowerCase()?c.toLowerCase():c.toUpperCase(),a.replaceRange(c,{line:b.line,ch:b.ch},{line:b.line,ch:b.ch+1}),a.setCursor(b.line,b.ch+1)},"Ctrl-B":function(a){CodeMirror.commands.goPageUp(a)},"Ctrl-F":function(a){CodeMirror.commands.goPageDown(a)},"Ctrl-P":"goLineUp","Ctrl-N":"goLineDown",U:"undo","Ctrl-R":"redo","Shift-4":"goLineEnd"},function(a,b){t[a]=j(b)}),CodeMirror.keyMap["vim-prefix-g"]={E:j(function(a){o(a,l,-1,"start")}),"Shift-E":j(function(a){o(a,m,-1,"start")}),auto:"vim",catchall:function(a){}},CodeMirror.keyMap["vim-prefix-m"]={A:function(a){e.A=a.getCursor().line},"Shift-A":function(a){e["Shift-A"]=a.getCursor().line},B:function(a){e.B=a.getCursor().line},"Shift-B":function(a){e["Shift-B"]=a.getCursor().line},C:function(a){e.C=a.getCursor().line},"Shift-C":function(a){e["Shift-C"]=a.getCursor().line},D:function(a){e.D=a.getCursor().line},"Shift-D":function(a){e["Shift-D"]=a.getCursor().line},E:function(a){e.E=a.getCursor().line},"Shift-E":function(a){e["Shift-E"]=a.getCursor().line},F:function(a){e.F=a.getCursor().line},"Shift-F":function(a){e["Shift-F"]=a.getCursor().line},G:function(a){e.G=a.getCursor().line},"Shift-G":function(a){e["Shift-G"]=a.getCursor().line},H:function(a){e.H=a.getCursor().line},"Shift-H":function(a){e["Shift-H"]=a.getCursor().line},I:function(a){e.I=a.getCursor().line},"Shift-I":function(a){e["Shift-I"]=a.getCursor().line},J:function(a){e.J=a.getCursor().line},"Shift-J":function(a){e["Shift-J"]=a.getCursor().line},K:function(a){e.K=a.getCursor().line},"Shift-K":function(a){e["Shift-K"]=a.getCursor().line},L:function(a){e.L=a.getCursor().line},"Shift-L":function(a){e["Shift-L"]=a.getCursor().line},M:function(a){e.M=a.getCursor().line},"Shift-M":function(a){e["Shift-M"]=a.getCursor().line},N:function(a){e.N=a.getCursor().line},"Shift-N":function(a){e["Shift-N"]=a.getCursor().line},O:function(a){e.O=a.getCursor().line},"Shift-O":function(a){e["Shift-O"]=a.getCursor().line},P:function(a){e.P=a.getCursor().line},"Shift-P":function(a){e["Shift-P"]=a.getCursor().line},Q:function(a){e.Q=a.getCursor().line},"Shift-Q":function(a){e["Shift-Q"]=a.getCursor().line},R:function(a){e.R=a.getCursor().line},"Shift-R":function(a){e["Shift-R"]=a.getCursor().line},S:function(a){e.S=a.getCursor().line},"Shift-S":function(a){e["Shift-S"]=a.getCursor().line},T:function(a){e.T=a.getCursor().line},"Shift-T":function(a){e["Shift-T"]=a.getCursor().line},U:function(a){e.U=a.getCursor().line},"Shift-U":function(a){e["Shift-U"]=a.getCursor().line},V:function(a){e.V=a.getCursor().line},"Shift-V":function(a){e["Shift-V"]=a.getCursor().line},W:function(a){e.W=a.getCursor().line},"Shift-W":function(a){e["Shift-W"]=a.getCursor().line},X:function(a){e.X=a.getCursor().line},"Shift-X":function(a){e["Shift-X"]=a.getCursor().line},Y:function(a){e.Y=a.getCursor().line},"Shift-Y":function(a){e["Shift-Y"]=a.getCursor().line},Z:function(a){e.Z=a.getCursor().line},"Shift-Z":function(a){e["Shift-Z"]=a.getCursor().line},auto:"vim",catchall:function(a){}},CodeMirror.keyMap["vim-prefix-d"]={D:j(function(a){g("\n"+a.getLine(a.getCursor().line)),a.removeLine(a.getCursor().line)}),"'":function(a){a.setOption("keyMap","vim-prefix-d'"),f()},auto:"vim",catchall:function(a){}},CodeMirror.keyMap["vim-prefix-d'"]={A:function(a){r(a,"A")},"Shift-A":function(a){r(a,"Shift-A")},B:function(a){r(a,"B")},"Shift-B":function(a){r(a,"Shift-B")},C:function(a){r(a,"C")},"Shift-C":function(a){r(a,"Shift-C")},D:function(a){r(a,"D")},"Shift-D":function(a){r(a,"Shift-D")},E:function(a){r(a,"E")},"Shift-E":function(a){r(a,"Shift-E")},F:function(a){r(a,"F")},"Shift-F":function(a){r(a,"Shift-F")},G:function(a){r(a,"G")},"Shift-G":function(a){r(a,"Shift-G")},H:function(a){r(a,"H")},"Shift-H":function(a){r(a,"Shift-H")},I:function(a){r(a,"I")},"Shift-I":function(a){r(a,"Shift-I")},J:function(a){r(a,"J")},"Shift-J":function(a){r(a,"Shift-J")},K:function(a){r(a,"K")},"Shift-K":function(a){r(a,"Shift-K")},L:function(a){r(a,"L")},"Shift-L":function(a){r(a,"Shift-L")},M:function(a){r(a,"M")},"Shift-M":function(a){r(a,"Shift-M")},N:function(a){r(a,"N")},"Shift-N":function(a){r(a,"Shift-N")},O:function(a){r(a,"O")},"Shift-O":function(a){r(a,"Shift-O")},P:function(a){r(a,"P")},"Shift-P":function(a){r(a,"Shift-P")},Q:function(a){r(a,"Q")},"Shift-Q":function(a){r(a,"Shift-Q")},R:function(a){r(a,"R")},"Shift-R":function(a){r(a,"Shift-R")},S:function(a){r(a,"S")},"Shift-S":function(a){r(a,"Shift-S")},T:function(a){r(a,"T")},"Shift-T":function(a){r(a,"Shift-T")},U:function(a){r(a,"U")},"Shift-U":function(a){r(a,"Shift-U")},V:function(a){r(a,"V")},"Shift-V":function(a){r(a,"Shift-V")},W:function(a){r(a,"W")},"Shift-W":function(a){r(a,"Shift-W")},X:function(a){r(a,"X")},"Shift-X":function(a){r(a,"Shift-X")},Y:function(a){r(a,"Y")},"Shift-Y":function(a){r(a,"Shift-Y")},Z:function(a){r(a,"Z")},"Shift-Z":function(a){r(a,"Shift-Z")},auto:"vim",catchall:function(a){}},CodeMirror.keyMap["vim-prefix-y'"]={A:function(a){s(a,"A")},"Shift-A":function(a){s(a,"Shift-A")},B:function(a){s(a,"B")},"Shift-B":function(a){s(a,"Shift-B")},C:function(a){s(a,"C")},"Shift-C":function(a){s(a,"Shift-C")},D:function(a){s(a,"D")},"Shift-D":function(a){s(a,"Shift-D")},E:function(a){s(a,"E")},"Shift-E":function(a){s(a,"Shift-E")},F:function(a){s(a,"F")},"Shift-F":function(a){s(a,"Shift-F")},G:function(a){s(a,"G")},"Shift-G":function(a){s(a,"Shift-G")},H:function(a){s(a,"H")},"Shift-H":function(a){s(a,"Shift-H")},I:function(a){s(a,"I")},"Shift-I":function(a){s(a,"Shift-I")},J:function(a){s(a,"J")},"Shift-J":function(a){s(a,"Shift-J")},K:function(a){s(a,"K")},"Shift-K":function(a){s(a,"Shift-K")},L:function(a){s(a,"L")},"Shift-L":function(a){s(a,"Shift-L")},M:function(a){s(a,"M")},"Shift-M":function(a){s(a,"Shift-M")},N:function(a){s(a,"N")},"Shift-N":function(a){s(a,"Shift-N")},O:function(a){s(a,"O")},"Shift-O":function(a){s(a,"Shift-O")},P:function(a){s(a,"P")},"Shift-P":function(a){s(a,"Shift-P")},Q:function(a){s(a,"Q")},"Shift-Q":function(a){s(a,"Shift-Q")},R:function(a){s(a,"R")},"Shift-R":function(a){s(a,"Shift-R")},S:function(a){s(a,"S")},"Shift-S":function(a){s(a,"Shift-S")},T:function(a){s(a,"T")},"Shift-T":function(a){s(a,"Shift-T")},U:function(a){s(a,"U")},"Shift-U":function(a){s(a,"Shift-U")},V:function(a){s(a,"V")},"Shift-V":function(a){s(a,"Shift-V")},W:function(a){s(a,"W")},"Shift-W":function(a){s(a,"Shift-W")},X:function(a){s(a,"X")},"Shift-X":function(a){s(a,"Shift-X")},Y:function(a){s(a,"Y")},"Shift-Y":function(a){s(a,"Shift-Y")},Z:function(a){s(a,"Z")},"Shift-Z":function(a){s(a,"Shift-Z")},auto:"vim",catchall:function(a){}},CodeMirror.keyMap["vim-prefix-y"]={Y:j(function(a){g("\n"+a.getLine(a.getCursor().line+d)),d++}),"'":function(a){a.setOption("keyMap","vim-prefix-y'"),f()},auto:"vim",catchall:function(a){}},CodeMirror.keyMap["vim-insert"]={Esc:function(a){a.setCursor(a.getCursor().line,a.getCursor().ch-1,!0),a.setOption("keyMap","vim"),q("vim")},"Ctrl-N":function(a){},"Ctrl-P":function(a){},fallthrough:["default"]}})();