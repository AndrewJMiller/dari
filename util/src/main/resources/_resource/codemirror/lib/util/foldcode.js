CodeMirror.tagRangeFinder=function(a,b){var c="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=c+"-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",e=new RegExp("^["+c+"]["+d+"]*"),f=a.getLine(b),g=!1,h=null,i=0;while(!g){i=f.indexOf("<",i);if(-1==i)return;if(i+1<f.length&&f[i+1]=="/"){i++;continue}if(!f.substr(i+1).match(e)){i++;continue}var j=f.indexOf(">",i+1);if(-1==j){var k=b+1,l=!1,m=a.lineCount();while(k<m&&!l){var n=a.getLine(k),o=n.indexOf(">");if(-1!=o){l=!0;var p=n.lastIndexOf("/",o);if(-1!=p&&p<o){var q=f.substr(p,o-p+1);if(!q.match(/\/\s*\>/))return k+1}}k++}g=!0}else{var r=f.lastIndexOf("/",j);if(-1==r)g=!0;else{var q=f.substr(r,j-r+1);q.match(/\/\s*\>/)||(g=!0)}}if(g){var s=f.substr(i+1);h=s.match(e),h?(h=h[0],-1!=f.indexOf("</"+h+">",i)&&(g=!1)):g=!1}g||i++}if(g){var t="(\\<\\/"+h+"\\>)|(\\<"+h+"\\>)|(\\<"+h+"s)|(\\<"+h+"$)",u=new RegExp(t,"g"),v="</"+h+">",w=1,k=b+1,m=a.lineCount();while(k<m){f=a.getLine(k);var x=f.match(u);if(x)for(var y=0;y<x.length;y++){x[y]==v?w--:w++;if(!w)return k+1}k++}return}},CodeMirror.braceRangeFinder=function(a,b){var c=a.getLine(b),d=c.lastIndexOf("{");if(d<0||c.lastIndexOf("}")>d)return;var e=a.getTokenAt({line:b,ch:d}).className,f=1,g=a.lineCount(),h;a:for(var i=b+1;i<g;++i){var j=a.getLine(i),k=0;for(;;){var l=j.indexOf("{",k),m=j.indexOf("}",k);l<0&&(l=j.length),m<0&&(m=j.length),k=Math.min(l,m);if(k==j.length)break;if(a.getTokenAt({line:i,ch:k+1}).className==e)if(k==l)++f;else if(!--f){h=i;break a}++k}}if(h==null||h==b+1)return;return h},CodeMirror.indentRangeFinder=function(a,b){var c=a.getOption("tabSize"),d=a.getLineHandle(b).indentation(c),e;for(var f=b+1,g=a.lineCount();f<g;++f){var h=a.getLineHandle(f);if(!/^\s*$/.test(h.text)){if(h.indentation(c)<=d)break;e=f}}return e?e+1:null},CodeMirror.newFoldFunction=function(a,b){function d(a,b){for(var d=0;d<c.length;++d){var e=a.lineInfo(c[d].start);if(!e)c.splice(d--,1);else if(e.line==b)return{pos:d,region:c[d]}}}function e(a,b){a.clearMarker(b.start);for(var c=0;c<b.hidden.length;++c)a.showLine(b.hidden[c])}var c=[];return b==null&&(b='<div style="position: absolute; left: 2px; color:#600">&#x25bc;</div>%N%'),function(f,g){f.operation(function(){var h=d(f,g);if(h)c.splice(h.pos,1),e(f,h.region);else{var i=a(f,g);if(i==null)return;var j=[];for(var k=g+1;k<i;++k){var l=f.hideLine(k);l&&j.push(l)}var m=f.setMarker(g,b),n={start:m,hidden:j};f.onDeleteLine(m,function(){e(f,n)}),c.push(n)}})}};